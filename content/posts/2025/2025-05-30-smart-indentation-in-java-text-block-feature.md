---
title: 'Smart Indentation in Java Text Block Feature'
author: Abhishek
type: post
date: 2025-05-30T16:03:04+05:30
url: "/smart-indentation-in-java-text-block-feature/"
toc: true
draft: false
categories: [ "java" ]
tags: [ "java-15-features" ]
---

It was a regular Thursday morning when I joined a code review session with my team. One of our teammates, Ravi, was
working on building a dynamic email generation module. The content of the email was built using Java strings and it
looked something like this:

```java
String emailBody = "<html>\n" +
        "  <body>\n" +
        "    <h1>Hello, User!</h1>\n" +
        "    <p>Welcome to our platform.</p>\n" +
        "  </body>\n" +
        "</html>";
```

Everyone in the room sighed in pain. Not because the logic was wrong, but because the readability was horrible. That's
when someone pointed out the Java text block feature introduced in JDK 13 (as a preview) and finalized in JDK 15.

This sparked a conversation around not just text blocks, but also how smart indentation can make a big difference. Let’s
explore that journey together.

## Problem – The Pain of Verbose String Handling

Traditionally, working with multi-line strings in Java has always been messy:

1. **Too many escape characters**: Quotes, new lines, tabs.
2. **Poor readability**: Especially for HTML, JSON, XML, or SQL strings.
3. **Hard to maintain**: Changes in content often lead to broken formatting or bugs.
4. **Unnatural indentation**: Aligning code and text is often a compromise.

Developers ended up writing unreadable or misaligned string literals, just to ensure syntactical correctness.

## Solution – Java Text Block and Smart Indentation

Java text blocks, introduced officially in Java 15, solve the above problems by allowing developers to write multi-line
strings with natural formatting using triple quotes (`"""`).

**Smart indentation** is an integral part of this feature. It allows Java to infer and remove common leading white
spaces from each line, helping developers write naturally indented, readable code **without affecting the content**.

## Examples and Detailed Explanation

### 1. HTML Email Template

```java
String html = """
        <html>
            <body>
                <h1>Hello, User!</h1>
                <p>Welcome to our platform.</p>
            </body>
        </html>
        """;
System.out.println(html);
```

**Explanation:**

* Java automatically removes the common leading white space from all lines.
* Your code remains cleanly indented.
* The printed content has no unwanted indentation.

### 2. SQL Query

```java
String query = """
        SELECT id, name, email
        FROM users
        WHERE status = 'ACTIVE'
        ORDER BY name;
        """;
```

**Use Case:** Useful in Spring repositories or JDBC templates.

### 3. JSON Snippet

```java
String json = """
        {
            "name": "John Doe",
            "email": "john@example.com",
            "active": true
        }
        """;
```

**Why this is great:**

* Clean JSON format
* Easy to read, copy-paste during debugging

### 4. Command Templates

```java
String shellScript = """
        #!/bin/bash
        echo "Starting server..."
        java -jar app.jar
        """;
```

**In DevOps scripts or embedded shell commands**, this saves a lot of hassle.

### 5. Markdown Generation

```java
String markdown = """
        # Welcome
        
        This is an autogenerated README file.
        
        - Feature 1
        - Feature 2
        - Feature 3
        """;
```

## Customizing Leading and Trailing Indentation

Java uses a smart approach to determine the common leading whitespace and automatically strips it from the text block.
However, there are cases where you might want more control:

### Leading Indentation Customization

The leading indentation is calculated based on the **line with the least indentation**. If you want to ensure specific
leading spaces remain, use padding or avoid indenting the entire block in code:

```java
String withPadding = """
            Line with space
            Another line
        """;
```

If `Another line` has less indentation than `Line with space`, the minimum indentation (`"    "`) is removed from all
lines.

### Trailing Line Handling

Trailing newlines are preserved. If you want to remove the final newline from the block:

```java
String trimmed = """First line
        Second line""";
```

This block contains **no trailing newline**. But if you write:

```java
String withNewline = """
        First line
        Second line
        """;
```

Then the trailing newline will be part of the string.

You can also use `.stripTrailing()` or `.stripIndent()` from the String API for further trimming or formatting.

### \s Support for Manual Whitespace

Java text blocks also support the escape sequence `\s` for a **single space character**, useful for maintaining spacing when trimming occurs.

```java
String padded = """
Hello\s
World
""";
System.out.println(padded);
```

**Output:**

```shell
Hello 
World
```

This is particularly handy in templates or formatting-sensitive cases like markdown, logs, 
or configuration generation.


## Best Practices

* **Indent to your code, not your string:** Don’t manually align your string content to left margin—let smart
  indentation do its job.
* **Preview output often**: Especially for markup languages, check output to ensure formatting.
* **Consistent whitespace:** Make sure all lines have a consistent starting point for correct inference.
* **Avoid tabs**: Use spaces instead to ensure predictable behavior.
* **Combine with format() if needed**: For dynamic parts, text blocks can be used with `String.format()` or
  `MessageFormat`.

```java
String name = "Ravi";
String welcome = String.format("""
        <h1>Hello, %s!</h1>
        """, name);
```

## Anti-Patterns

* **Manual left-alignment ruining indentation:**

```java
String bad = """
        <html>
            <body>
        """; // Inconsistent leading whitespaces
```

* **Mixing tabs and spaces**
* **Embedding too much logic inside text blocks** – use templating engines (like FreeMarker, Thymeleaf) if complexity
  increases

## Final Thoughts

Smart indentation with text blocks is one of those Java features that brings a lot of joy to day-to-day coding. It
eliminates the need for hacks, improves code clarity, and enhances maintainability. Combined with formatting tools, it
makes Java cleaner and more expressive for real-world use cases.

Text blocks aren’t just about writing prettier strings—they make Java more expressive, maintainable, and joyful to work
with.

## Summary

* Text blocks make multi-line string management in Java elegant.
* Smart indentation reduces noise without affecting string content.
* Useful for HTML, SQL, JSON, Markdown, command scripts, etc.
* Avoid anti-patterns like inconsistent spacing or over-complex logic.
* Always preview output and test with consistent indentation.
* Use `\s` escape sequence to add precise spaces.

## Good Quote

> "Simplicity is the ultimate sophistication." – Leonardo da Vinci



That's it for today, will meet in next episode.

Happy coding :grinning:
